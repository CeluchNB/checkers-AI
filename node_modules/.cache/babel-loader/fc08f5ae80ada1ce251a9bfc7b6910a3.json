{"ast":null,"code":"export function minimax(board, isMax, depth, alpha, beta, blackHeuristic) {\n  if (depth === 5) {\n    board.m = calculateHeuristic(board, blackHeuristic);\n    return board;\n  }\n\n  if (isMax) {\n    var valBoard = copyBoard(board);\n    valBoard.m = -10000;\n    var nextBoards = getNextBoards(board, isMax, blackHeuristic);\n\n    for (var i = 0; i < nextBoards.length; i++) {\n      //get board from minimax, compare board.m to val\n      //find a way to return board from all control branches\n      var board = minimax(nextBoards[i], !isMax, depth + 1, alpha, beta, blackHeuristic);\n      console.log(board.m); //val = Math.max(val, board.m);\n\n      valBoard = board.m > valBoard.m ? board : valBoard;\n      alpha = Math.max(alpha, valBoard.m);\n\n      if (alpha >= beta) {\n        return valBoard;\n      }\n    }\n\n    return valBoard;\n  } else {\n    var valBoard = copyBoard(board);\n    valBoard.m = 10000;\n    var nextBoards = getNextBoards(board, isMax, blackHeuristic);\n\n    for (var i = 0; i < nextBoards.length; i++) {\n      var board = minimax(nextBoards[i], !isMax, depth + 1, alpha, beta, blackHeuristic); //val = Math.min(val, board.m);\n\n      valBoard = board.m < valBoard.m ? board : valBoard;\n      beta = Math.min(beta, valBoard.m); //board.m = val;\n\n      if (alpha >= beta) {\n        return valBoard;\n      }\n    }\n\n    return valBoard;\n  }\n}\nexport function calculateHeuristic(board, blackHeuristic) {\n  var h = 0;\n\n  if (blackHeuristic) {\n    h = board.black.length - board.red.length;\n  } else {\n    h = board.red.length - board.black.length;\n  }\n\n  return h;\n}\nexport function getNextBoards(board, isMax, blackHeuristic) {\n  var moves = getAllValidMoves(board, isMax, blackHeuristic);\n  var firstBoards = [];\n\n  if (isMax && blackHeuristic || !isMax && !blackHeuristic) {\n    for (var i = 0; i < moves.length; i++) {\n      firstBoards.push(executeMove(board, moves[i], true));\n    }\n  } else {\n    for (var i = 0; i < moves.length; i++) {\n      firstBoards.push(executeMove(board, moves[i], false));\n    }\n  }\n\n  var boards = [];\n\n  for (var i = 0; i < firstBoards.length; i++) {\n    if (firstBoards[i].length > 0) {\n      for (var j = 0; j < firstBoards[i].length; j++) {\n        boards.push(firstBoards[i][j]);\n      }\n    }\n  }\n\n  return boards;\n}\nexport function executeMove(board, move, blackTurn) {\n  var boards = [];\n\n  for (var i = 0; i < move.nextMoves.length; i++) {\n    var tempBoard = copyBoard(board);\n\n    if (move.nextMoves[i].jump) {\n      addPiece(tempBoard, move.nextMoves[i], blackTurn);\n      removePiece(tempBoard, move.move, blackTurn);\n      removePiece(tempBoard, move.nextMoves[i].jumpedPiece, !blackTurn);\n    } else {\n      addPiece(tempBoard, move.nextMoves[i], blackTurn);\n      removePiece(tempBoard, move.move, blackTurn);\n    }\n\n    boards.push(tempBoard);\n  }\n\n  return boards;\n}\n\nfunction copyBoard(board) {\n  var tempBoard = {\n    black: [],\n    red: []\n  };\n\n  for (var i = 0; i < board.black.length; i++) {\n    tempBoard.black.push(board.black[i]);\n  }\n\n  for (i = 0; i < board.red.length; i++) {\n    tempBoard.red.push(board.red[i]);\n  }\n\n  if ('m' in board) {\n    tempBoard.m = board.m;\n  }\n\n  return tempBoard;\n}\n\nexport function getAllValidMoves(board, isMax, blackHeuristic) {\n  var moves = [];\n\n  if (isMax && blackHeuristic || !isMax && !blackHeuristic) {\n    for (var i = 0; i < board.black.length; i++) {\n      var posMoves = {\n        move: board.black[i]\n      };\n      posMoves.nextMoves = getValidMoves(board, board.black[i]);\n      moves.push(posMoves);\n    }\n  } else {\n    for (var i = 0; i < board.red.length; i++) {\n      var posMoves = {\n        move: board.red[i]\n      };\n      posMoves.nextMoves = getValidMoves(board, board.red[i]);\n      moves.push(posMoves);\n    }\n  }\n\n  return moves;\n}\n\nfunction getValidMoves(board, position) {\n  var moves = [];\n\n  if (blackContains(board, position) || redContains(board, position)) {\n    for (var i = -1; i < 2; i++) {\n      for (var j = -1; j < 2; j++) {\n        if (i !== 0 && j !== 0) {\n          if (position.row + i > -1 && position.row + i < 8 && position.column + j > -1 && position.column + j < 8) {\n            var pos = {\n              row: position.row + i,\n              column: position.column + j,\n              jump: false\n            };\n\n            if (!blackContains(board, pos) && !redContains(board, pos)) {\n              moves.push(pos);\n            }\n\n            var jumpPos = getValidJump(position, i, j, board);\n\n            if (jumpPos.length > 0) {\n              moves.push(jumpPos[0]);\n            }\n          }\n        }\n      }\n    }\n  }\n\n  return moves;\n}\n\nfunction getValidJump(curPos, i, j, board) {\n  var newPos = {\n    row: curPos.row + i,\n    column: curPos.column + j\n  };\n  var jumpPos = {\n    row: newPos.row + i,\n    column: newPos.column + j,\n    jump: true,\n    jumpedPiece: newPos\n  };\n\n  if (jumpPos.row > -1 && jumpPos.row < 8 && jumpPos.column > -1 && jumpPos.column < 8) {\n    if (blackContains(board, curPos)) {\n      if (redContains(board, newPos) && !blackContains(board, jumpPos) && !redContains(board, jumpPos)) {\n        return [jumpPos];\n      }\n    }\n\n    if (redContains(board, curPos)) {\n      if (blackContains(board, newPos) && !blackContains(board, jumpPos) && !redContains(board, jumpPos)) {\n        return [jumpPos];\n      }\n    }\n  }\n\n  return [];\n}\n\nfunction removePiece(board, position, black) {\n  if (black === true) {\n    for (var i = 0; i < board.black.length; i++) {\n      if (board.black[i].row === position.row && board.black[i].column === position.column) {\n        board.black.splice(i, 1);\n      }\n    }\n  } else {\n    for (var i = 0; i < board.red.length; i++) {\n      if (board.red[i].row === position.row && board.red[i].column === position.column) {\n        board.red.splice(i, 1);\n      }\n    }\n  }\n\n  return board;\n}\n\nfunction addPiece(board, position, black) {\n  if (black === true) {\n    board.black.push(position);\n  } else {\n    board.red.push(position);\n  }\n\n  return board;\n}\n\nfunction blackContains(board, position) {\n  for (var i = 0; i < board.black.length; i++) {\n    if (board.black[i].row === position.row && board.black[i].column === position.column) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction redContains(board, position) {\n  for (var i = 0; i < board.red.length; i++) {\n    if (board.red[i].row === position.row && board.red[i].column === position.column) {\n      return true;\n    }\n  }\n\n  return false;\n}","map":{"version":3,"sources":["/Users/noahceluch/Documents/checkers/src/MiniMax.js"],"names":["minimax","board","isMax","depth","alpha","beta","blackHeuristic","m","calculateHeuristic","valBoard","copyBoard","nextBoards","getNextBoards","i","length","console","log","Math","max","min","h","black","red","moves","getAllValidMoves","firstBoards","push","executeMove","boards","j","move","blackTurn","nextMoves","tempBoard","jump","addPiece","removePiece","jumpedPiece","posMoves","getValidMoves","position","blackContains","redContains","row","column","pos","jumpPos","getValidJump","curPos","newPos","splice"],"mappings":"AAEA,OAAO,SAASA,OAAT,CAAiBC,KAAjB,EAAwBC,KAAxB,EAA+BC,KAA/B,EAAsCC,KAAtC,EAA6CC,IAA7C,EAAmDC,cAAnD,EAAmE;AACxE,MAAIH,KAAK,KAAK,CAAd,EAAiB;AACfF,IAAAA,KAAK,CAACM,CAAN,GAAUC,kBAAkB,CAACP,KAAD,EAAQK,cAAR,CAA5B;AACA,WAAOL,KAAP;AACD;;AACD,MAAIC,KAAJ,EAAW;AACT,QAAIO,QAAQ,GAAGC,SAAS,CAACT,KAAD,CAAxB;AACAQ,IAAAA,QAAQ,CAACF,CAAT,GAAa,CAAC,KAAd;AACA,QAAII,UAAU,GAAGC,aAAa,CAACX,KAAD,EAAQC,KAAR,EAAeI,cAAf,CAA9B;;AACA,SAAK,IAAIO,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,UAAU,CAACG,MAA/B,EAAuCD,CAAC,EAAxC,EAA4C;AAC1C;AACA;AACA,UAAIZ,KAAK,GAAGD,OAAO,CAACW,UAAU,CAACE,CAAD,CAAX,EAAgB,CAACX,KAAjB,EAAwBC,KAAK,GAAG,CAAhC,EAAmCC,KAAnC,EAA0CC,IAA1C,EAAgDC,cAAhD,CAAnB;AACAS,MAAAA,OAAO,CAACC,GAAR,CAAYf,KAAK,CAACM,CAAlB,EAJ0C,CAK1C;;AACAE,MAAAA,QAAQ,GAAGR,KAAK,CAACM,CAAN,GAAUE,QAAQ,CAACF,CAAnB,GAAuBN,KAAvB,GAA+BQ,QAA1C;AACAL,MAAAA,KAAK,GAAGa,IAAI,CAACC,GAAL,CAASd,KAAT,EAAgBK,QAAQ,CAACF,CAAzB,CAAR;;AACA,UAAIH,KAAK,IAAIC,IAAb,EAAmB;AACjB,eAAOI,QAAP;AACD;AACF;;AACD,WAAOA,QAAP;AACD,GAjBD,MAiBO;AACL,QAAIA,QAAQ,GAAGC,SAAS,CAACT,KAAD,CAAxB;AACAQ,IAAAA,QAAQ,CAACF,CAAT,GAAa,KAAb;AACA,QAAII,UAAU,GAAGC,aAAa,CAACX,KAAD,EAAQC,KAAR,EAAeI,cAAf,CAA9B;;AACA,SAAK,IAAIO,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,UAAU,CAACG,MAA/B,EAAuCD,CAAC,EAAxC,EAA4C;AAC1C,UAAIZ,KAAK,GAAGD,OAAO,CAACW,UAAU,CAACE,CAAD,CAAX,EAAgB,CAACX,KAAjB,EAAwBC,KAAK,GAAG,CAAhC,EAAmCC,KAAnC,EAA0CC,IAA1C,EAAgDC,cAAhD,CAAnB,CAD0C,CAE1C;;AACAG,MAAAA,QAAQ,GAAGR,KAAK,CAACM,CAAN,GAAUE,QAAQ,CAACF,CAAnB,GAAuBN,KAAvB,GAA+BQ,QAA1C;AACAJ,MAAAA,IAAI,GAAGY,IAAI,CAACE,GAAL,CAASd,IAAT,EAAeI,QAAQ,CAACF,CAAxB,CAAP,CAJ0C,CAK1C;;AACA,UAAIH,KAAK,IAAIC,IAAb,EAAmB;AACjB,eAAOI,QAAP;AACD;AACF;;AACD,WAAOA,QAAP;AACD;AACF;AAED,OAAO,SAASD,kBAAT,CAA4BP,KAA5B,EAAmCK,cAAnC,EAAmD;AACxD,MAAIc,CAAC,GAAG,CAAR;;AACA,MAAGd,cAAH,EAAmB;AACjBc,IAAAA,CAAC,GAAGnB,KAAK,CAACoB,KAAN,CAAYP,MAAZ,GAAqBb,KAAK,CAACqB,GAAN,CAAUR,MAAnC;AACD,GAFD,MAEO;AACLM,IAAAA,CAAC,GAAGnB,KAAK,CAACqB,GAAN,CAAUR,MAAV,GAAmBb,KAAK,CAACoB,KAAN,CAAYP,MAAnC;AACD;;AACD,SAAOM,CAAP;AACD;AAED,OAAO,SAASR,aAAT,CAAuBX,KAAvB,EAA8BC,KAA9B,EAAqCI,cAArC,EAAqD;AAE1D,MAAIiB,KAAK,GAAGC,gBAAgB,CAACvB,KAAD,EAAQC,KAAR,EAAeI,cAAf,CAA5B;AACA,MAAImB,WAAW,GAAI,EAAnB;;AACA,MAAIvB,KAAK,IAAII,cAAV,IAA8B,CAACJ,KAAD,IAAU,CAACI,cAA5C,EAA6D;AAC3D,SAAI,IAAIO,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGU,KAAK,CAACT,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;AACpCY,MAAAA,WAAW,CAACC,IAAZ,CAAiBC,WAAW,CAAC1B,KAAD,EAAQsB,KAAK,CAACV,CAAD,CAAb,EAAkB,IAAlB,CAA5B;AACD;AACF,GAJD,MAIO;AACL,SAAI,IAAIA,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGU,KAAK,CAACT,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;AACpCY,MAAAA,WAAW,CAACC,IAAZ,CAAiBC,WAAW,CAAC1B,KAAD,EAAQsB,KAAK,CAACV,CAAD,CAAb,EAAkB,KAAlB,CAA5B;AACD;AACF;;AACD,MAAIe,MAAM,GAAG,EAAb;;AAEA,OAAI,IAAIf,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGY,WAAW,CAACX,MAA/B,EAAuCD,CAAC,EAAxC,EAA4C;AAC1C,QAAGY,WAAW,CAACZ,CAAD,CAAX,CAAeC,MAAf,GAAwB,CAA3B,EAA8B;AAC5B,WAAI,IAAIe,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGJ,WAAW,CAACZ,CAAD,CAAX,CAAeC,MAAlC,EAA0Ce,CAAC,EAA3C,EAA+C;AAC7CD,QAAAA,MAAM,CAACF,IAAP,CAAYD,WAAW,CAACZ,CAAD,CAAX,CAAegB,CAAf,CAAZ;AACD;AACF;AACF;;AACD,SAAOD,MAAP;AACD;AAED,OAAO,SAASD,WAAT,CAAqB1B,KAArB,EAA4B6B,IAA5B,EAAkCC,SAAlC,EAA6C;AAClD,MAAIH,MAAM,GAAG,EAAb;;AACA,OAAI,IAAIf,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGiB,IAAI,CAACE,SAAL,CAAelB,MAAlC,EAA0CD,CAAC,EAA3C,EAA+C;AAC7C,QAAIoB,SAAS,GAAGvB,SAAS,CAACT,KAAD,CAAzB;;AACA,QAAG6B,IAAI,CAACE,SAAL,CAAenB,CAAf,EAAkBqB,IAArB,EAA2B;AACzBC,MAAAA,QAAQ,CAACF,SAAD,EAAYH,IAAI,CAACE,SAAL,CAAenB,CAAf,CAAZ,EAA+BkB,SAA/B,CAAR;AACAK,MAAAA,WAAW,CAACH,SAAD,EAAYH,IAAI,CAACA,IAAjB,EAAuBC,SAAvB,CAAX;AACAK,MAAAA,WAAW,CAACH,SAAD,EAAYH,IAAI,CAACE,SAAL,CAAenB,CAAf,EAAkBwB,WAA9B,EAA2C,CAACN,SAA5C,CAAX;AACD,KAJD,MAIO;AACLI,MAAAA,QAAQ,CAACF,SAAD,EAAYH,IAAI,CAACE,SAAL,CAAenB,CAAf,CAAZ,EAA+BkB,SAA/B,CAAR;AACAK,MAAAA,WAAW,CAACH,SAAD,EAAYH,IAAI,CAACA,IAAjB,EAAuBC,SAAvB,CAAX;AACD;;AACDH,IAAAA,MAAM,CAACF,IAAP,CAAYO,SAAZ;AACD;;AACD,SAAOL,MAAP;AACD;;AAED,SAASlB,SAAT,CAAmBT,KAAnB,EAA0B;AACxB,MAAIgC,SAAS,GAAG;AAACZ,IAAAA,KAAK,EAAE,EAAR;AAAYC,IAAAA,GAAG,EAAE;AAAjB,GAAhB;;AACA,OAAI,IAAIT,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGZ,KAAK,CAACoB,KAAN,CAAYP,MAA/B,EAAuCD,CAAC,EAAxC,EAA4C;AAC1CoB,IAAAA,SAAS,CAACZ,KAAV,CAAgBK,IAAhB,CAAqBzB,KAAK,CAACoB,KAAN,CAAYR,CAAZ,CAArB;AACD;;AACD,OAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGZ,KAAK,CAACqB,GAAN,CAAUR,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;AACrCoB,IAAAA,SAAS,CAACX,GAAV,CAAcI,IAAd,CAAmBzB,KAAK,CAACqB,GAAN,CAAUT,CAAV,CAAnB;AACD;;AACD,MAAG,OAAOZ,KAAV,EAAiB;AACfgC,IAAAA,SAAS,CAAC1B,CAAV,GAAcN,KAAK,CAACM,CAApB;AACD;;AACD,SAAO0B,SAAP;AACD;;AAED,OAAO,SAAST,gBAAT,CAA0BvB,KAA1B,EAAiCC,KAAjC,EAAwCI,cAAxC,EAAwD;AAC7D,MAAIiB,KAAK,GAAG,EAAZ;;AACA,MAAGrB,KAAK,IAAII,cAAT,IAA2B,CAACJ,KAAD,IAAU,CAACI,cAAzC,EAAyD;AACvD,SAAI,IAAIO,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGZ,KAAK,CAACoB,KAAN,CAAYP,MAA/B,EAAuCD,CAAC,EAAxC,EAA4C;AAC1C,UAAIyB,QAAQ,GAAG;AAACR,QAAAA,IAAI,EAAE7B,KAAK,CAACoB,KAAN,CAAYR,CAAZ;AAAP,OAAf;AACAyB,MAAAA,QAAQ,CAACN,SAAT,GAAqBO,aAAa,CAACtC,KAAD,EAAQA,KAAK,CAACoB,KAAN,CAAYR,CAAZ,CAAR,CAAlC;AACAU,MAAAA,KAAK,CAACG,IAAN,CAAWY,QAAX;AACD;AACF,GAND,MAOK;AACH,SAAI,IAAIzB,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGZ,KAAK,CAACqB,GAAN,CAAUR,MAA7B,EAAqCD,CAAC,EAAtC,EAA0C;AACxC,UAAIyB,QAAQ,GAAG;AAACR,QAAAA,IAAI,EAAE7B,KAAK,CAACqB,GAAN,CAAUT,CAAV;AAAP,OAAf;AACAyB,MAAAA,QAAQ,CAACN,SAAT,GAAqBO,aAAa,CAACtC,KAAD,EAAQA,KAAK,CAACqB,GAAN,CAAUT,CAAV,CAAR,CAAlC;AACAU,MAAAA,KAAK,CAACG,IAAN,CAAWY,QAAX;AACD;AACF;;AACD,SAAOf,KAAP;AACD;;AAED,SAASgB,aAAT,CAAuBtC,KAAvB,EAA8BuC,QAA9B,EAAwC;AACtC,MAAIjB,KAAK,GAAG,EAAZ;;AACA,MAAGkB,aAAa,CAACxC,KAAD,EAAQuC,QAAR,CAAb,IAAkCE,WAAW,CAACzC,KAAD,EAAQuC,QAAR,CAAhD,EAAmE;AACjE,SAAI,IAAI3B,CAAC,GAAG,CAAC,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AAC1B,WAAI,IAAIgB,CAAC,GAAG,CAAC,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AAC1B,YAAGhB,CAAC,KAAK,CAAN,IAAWgB,CAAC,KAAK,CAApB,EAAuB;AACrB,cAAGW,QAAQ,CAACG,GAAT,GAAe9B,CAAf,GAAmB,CAAC,CAApB,IAAyB2B,QAAQ,CAACG,GAAT,GAAe9B,CAAf,GAAmB,CAA5C,IAAiD2B,QAAQ,CAACI,MAAT,GAAkBf,CAAlB,GAAsB,CAAC,CAAxE,IAA6EW,QAAQ,CAACI,MAAT,GAAkBf,CAAlB,GAAsB,CAAtG,EAAyG;AACvG,gBAAIgB,GAAG,GAAG;AAACF,cAAAA,GAAG,EAAEH,QAAQ,CAACG,GAAT,GAAe9B,CAArB;AAAwB+B,cAAAA,MAAM,EAAEJ,QAAQ,CAACI,MAAT,GAAkBf,CAAlD;AAAqDK,cAAAA,IAAI,EAAE;AAA3D,aAAV;;AACA,gBAAG,CAACO,aAAa,CAACxC,KAAD,EAAQ4C,GAAR,CAAd,IAA8B,CAACH,WAAW,CAACzC,KAAD,EAAQ4C,GAAR,CAA7C,EAA2D;AACzDtB,cAAAA,KAAK,CAACG,IAAN,CAAWmB,GAAX;AACD;;AACD,gBAAIC,OAAO,GAAGC,YAAY,CAACP,QAAD,EAAW3B,CAAX,EAAcgB,CAAd,EAAiB5B,KAAjB,CAA1B;;AACA,gBAAI6C,OAAO,CAAChC,MAAR,GAAiB,CAArB,EAAwB;AACtBS,cAAAA,KAAK,CAACG,IAAN,CAAWoB,OAAO,CAAC,CAAD,CAAlB;AACD;AACF;AACF;AACF;AACF;AACF;;AACD,SAAOvB,KAAP;AACD;;AAED,SAASwB,YAAT,CAAsBC,MAAtB,EAA8BnC,CAA9B,EAAiCgB,CAAjC,EAAoC5B,KAApC,EAA2C;AACzC,MAAIgD,MAAM,GAAG;AAACN,IAAAA,GAAG,EAAEK,MAAM,CAACL,GAAP,GAAa9B,CAAnB;AAAsB+B,IAAAA,MAAM,EAAEI,MAAM,CAACJ,MAAP,GAAgBf;AAA9C,GAAb;AACA,MAAIiB,OAAO,GAAG;AAACH,IAAAA,GAAG,EAAEM,MAAM,CAACN,GAAP,GAAa9B,CAAnB;AAAsB+B,IAAAA,MAAM,EAAEK,MAAM,CAACL,MAAP,GAAgBf,CAA9C;AAAiDK,IAAAA,IAAI,EAAE,IAAvD;AAA6DG,IAAAA,WAAW,EAAEY;AAA1E,GAAd;;AACA,MAAGH,OAAO,CAACH,GAAR,GAAc,CAAC,CAAf,IAAoBG,OAAO,CAACH,GAAR,GAAc,CAAlC,IAAuCG,OAAO,CAACF,MAAR,GAAiB,CAAC,CAAzD,IAA8DE,OAAO,CAACF,MAAR,GAAiB,CAAlF,EAAqF;AACnF,QAAGH,aAAa,CAACxC,KAAD,EAAQ+C,MAAR,CAAhB,EAAiC;AAC/B,UAAGN,WAAW,CAACzC,KAAD,EAAQgD,MAAR,CAAX,IAA8B,CAACR,aAAa,CAACxC,KAAD,EAAQ6C,OAAR,CAA5C,IAAgE,CAACJ,WAAW,CAACzC,KAAD,EAAQ6C,OAAR,CAA/E,EAAiG;AAC/F,eAAO,CAACA,OAAD,CAAP;AACD;AACF;;AACD,QAAGJ,WAAW,CAACzC,KAAD,EAAQ+C,MAAR,CAAd,EAA+B;AAC7B,UAAGP,aAAa,CAACxC,KAAD,EAAQgD,MAAR,CAAb,IAAgC,CAACR,aAAa,CAACxC,KAAD,EAAQ6C,OAAR,CAA9C,IAAkE,CAACJ,WAAW,CAACzC,KAAD,EAAQ6C,OAAR,CAAjF,EAAmG;AACjG,eAAO,CAACA,OAAD,CAAP;AACD;AACF;AACF;;AACD,SAAO,EAAP;AACD;;AAED,SAASV,WAAT,CAAqBnC,KAArB,EAA4BuC,QAA5B,EAAsCnB,KAAtC,EAA6C;AAC3C,MAAGA,KAAK,KAAK,IAAb,EAAmB;AACjB,SAAI,IAAIR,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGZ,KAAK,CAACoB,KAAN,CAAYP,MAA/B,EAAuCD,CAAC,EAAxC,EAA4C;AAC1C,UAAGZ,KAAK,CAACoB,KAAN,CAAYR,CAAZ,EAAe8B,GAAf,KAAuBH,QAAQ,CAACG,GAAhC,IAAuC1C,KAAK,CAACoB,KAAN,CAAYR,CAAZ,EAAe+B,MAAf,KAA0BJ,QAAQ,CAACI,MAA7E,EAAqF;AACnF3C,QAAAA,KAAK,CAACoB,KAAN,CAAY6B,MAAZ,CAAmBrC,CAAnB,EAAsB,CAAtB;AACD;AACF;AACF,GAND,MAMO;AACL,SAAI,IAAIA,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGZ,KAAK,CAACqB,GAAN,CAAUR,MAA7B,EAAqCD,CAAC,EAAtC,EAA0C;AACxC,UAAGZ,KAAK,CAACqB,GAAN,CAAUT,CAAV,EAAa8B,GAAb,KAAqBH,QAAQ,CAACG,GAA9B,IAAqC1C,KAAK,CAACqB,GAAN,CAAUT,CAAV,EAAa+B,MAAb,KAAwBJ,QAAQ,CAACI,MAAzE,EAAiF;AAC/E3C,QAAAA,KAAK,CAACqB,GAAN,CAAU4B,MAAV,CAAiBrC,CAAjB,EAAoB,CAApB;AACD;AACF;AACF;;AACD,SAAOZ,KAAP;AACD;;AAED,SAASkC,QAAT,CAAkBlC,KAAlB,EAAyBuC,QAAzB,EAAmCnB,KAAnC,EAA0C;AACxC,MAAGA,KAAK,KAAK,IAAb,EAAmB;AACjBpB,IAAAA,KAAK,CAACoB,KAAN,CAAYK,IAAZ,CAAiBc,QAAjB;AACD,GAFD,MAEO;AACLvC,IAAAA,KAAK,CAACqB,GAAN,CAAUI,IAAV,CAAec,QAAf;AACD;;AACD,SAAOvC,KAAP;AACD;;AAED,SAASwC,aAAT,CAAuBxC,KAAvB,EAA8BuC,QAA9B,EAAwC;AACtC,OAAK,IAAI3B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGZ,KAAK,CAACoB,KAAN,CAAYP,MAAhC,EAAwCD,CAAC,EAAzC,EAA6C;AAC3C,QAAIZ,KAAK,CAACoB,KAAN,CAAYR,CAAZ,EAAe8B,GAAf,KAAuBH,QAAQ,CAACG,GAAhC,IAAuC1C,KAAK,CAACoB,KAAN,CAAYR,CAAZ,EAAe+B,MAAf,KAA0BJ,QAAQ,CAACI,MAA9E,EAAsF;AACpF,aAAO,IAAP;AACD;AACF;;AACD,SAAO,KAAP;AACD;;AAED,SAASF,WAAT,CAAqBzC,KAArB,EAA4BuC,QAA5B,EAAsC;AACpC,OAAK,IAAI3B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGZ,KAAK,CAACqB,GAAN,CAAUR,MAA9B,EAAsCD,CAAC,EAAvC,EAA2C;AACzC,QAAIZ,KAAK,CAACqB,GAAN,CAAUT,CAAV,EAAa8B,GAAb,KAAqBH,QAAQ,CAACG,GAA9B,IAAqC1C,KAAK,CAACqB,GAAN,CAAUT,CAAV,EAAa+B,MAAb,KAAwBJ,QAAQ,CAACI,MAA1E,EAAkF;AAChF,aAAO,IAAP;AACD;AACF;;AACD,SAAO,KAAP;AACD","sourcesContent":["\n\nexport function minimax(board, isMax, depth, alpha, beta, blackHeuristic) {\n  if (depth === 5) {\n    board.m = calculateHeuristic(board, blackHeuristic);\n    return board;\n  }\n  if (isMax) {\n    var valBoard = copyBoard(board);\n    valBoard.m = -10000;\n    var nextBoards = getNextBoards(board, isMax, blackHeuristic);\n    for (var i = 0; i < nextBoards.length; i++) {\n      //get board from minimax, compare board.m to val\n      //find a way to return board from all control branches\n      var board = minimax(nextBoards[i], !isMax, depth + 1, alpha, beta, blackHeuristic);\n      console.log(board.m);\n      //val = Math.max(val, board.m);\n      valBoard = board.m > valBoard.m ? board : valBoard;\n      alpha = Math.max(alpha, valBoard.m);\n      if (alpha >= beta) {\n        return valBoard;\n      }\n    }\n    return valBoard;\n  } else {\n    var valBoard = copyBoard(board);\n    valBoard.m = 10000;\n    var nextBoards = getNextBoards(board, isMax, blackHeuristic);\n    for (var i = 0; i < nextBoards.length; i++) {\n      var board = minimax(nextBoards[i], !isMax, depth + 1, alpha, beta, blackHeuristic);\n      //val = Math.min(val, board.m);\n      valBoard = board.m < valBoard.m ? board : valBoard;\n      beta = Math.min(beta, valBoard.m);\n      //board.m = val;\n      if (alpha >= beta) {\n        return valBoard;\n      }\n    }\n    return valBoard;\n  }\n}\n\nexport function calculateHeuristic(board, blackHeuristic) {\n  var h = 0;\n  if(blackHeuristic) {\n    h = board.black.length - board.red.length;\n  } else {\n    h = board.red.length - board.black.length;\n  }\n  return h;\n}\n\nexport function getNextBoards(board, isMax, blackHeuristic) {\n\n  var moves = getAllValidMoves(board, isMax, blackHeuristic);\n  var firstBoards  = [];\n  if((isMax && blackHeuristic) || (!isMax && !blackHeuristic)) {\n    for(var i = 0; i < moves.length; i++) {\n      firstBoards.push(executeMove(board, moves[i], true))\n    }\n  } else {\n    for(var i = 0; i < moves.length; i++) {\n      firstBoards.push(executeMove(board, moves[i], false))\n    }\n  }\n  var boards = [];\n\n  for(var i = 0; i < firstBoards.length; i++) {\n    if(firstBoards[i].length > 0) {\n      for(var j = 0; j < firstBoards[i].length; j++) {\n        boards.push(firstBoards[i][j]);\n      }\n    }\n  }\n  return boards;\n}\n\nexport function executeMove(board, move, blackTurn) {\n  var boards = [];\n  for(var i = 0; i < move.nextMoves.length; i++) {\n    var tempBoard = copyBoard(board);\n    if(move.nextMoves[i].jump) {\n      addPiece(tempBoard, move.nextMoves[i], blackTurn);\n      removePiece(tempBoard, move.move, blackTurn);\n      removePiece(tempBoard, move.nextMoves[i].jumpedPiece, !blackTurn);\n    } else {\n      addPiece(tempBoard, move.nextMoves[i], blackTurn);\n      removePiece(tempBoard, move.move, blackTurn);\n    }\n    boards.push(tempBoard);\n  }\n  return boards;\n}\n\nfunction copyBoard(board) {\n  var tempBoard = {black: [], red: []};\n  for(var i = 0; i < board.black.length; i++) {\n    tempBoard.black.push(board.black[i]);\n  }\n  for (i = 0; i < board.red.length; i++) {\n    tempBoard.red.push(board.red[i]);\n  }\n  if('m' in board) {\n    tempBoard.m = board.m;\n  }\n  return tempBoard;\n}\n\nexport function getAllValidMoves(board, isMax, blackHeuristic) {\n  var moves = [];\n  if(isMax && blackHeuristic || !isMax && !blackHeuristic) {\n    for(var i = 0; i < board.black.length; i++) {\n      var posMoves = {move: board.black[i]};\n      posMoves.nextMoves = getValidMoves(board, board.black[i]);\n      moves.push(posMoves);\n    }\n  }\n  else {\n    for(var i = 0; i < board.red.length; i++) {\n      var posMoves = {move: board.red[i]};\n      posMoves.nextMoves = getValidMoves(board, board.red[i]);\n      moves.push(posMoves);\n    }\n  }\n  return moves;\n}\n\nfunction getValidMoves(board, position) {\n  var moves = [];\n  if(blackContains(board, position) || redContains(board, position)) {\n    for(var i = -1; i < 2; i++) {\n      for(var j = -1; j < 2; j++) {\n        if(i !== 0 && j !== 0) {\n          if(position.row + i > -1 && position.row + i < 8 && position.column + j > -1 && position.column + j < 8) {\n            var pos = {row: position.row + i, column: position.column + j, jump: false};\n            if(!blackContains(board, pos) && !redContains(board, pos)) {\n              moves.push(pos);\n            }\n            var jumpPos = getValidJump(position, i, j, board);\n            if (jumpPos.length > 0) {\n              moves.push(jumpPos[0]);\n            }\n          }\n        }\n      }\n    }\n  }\n  return moves;\n}\n\nfunction getValidJump(curPos, i, j, board) {\n  var newPos = {row: curPos.row + i, column: curPos.column + j};\n  var jumpPos = {row: newPos.row + i, column: newPos.column + j, jump: true, jumpedPiece: newPos};\n  if(jumpPos.row > -1 && jumpPos.row < 8 && jumpPos.column > -1 && jumpPos.column < 8) {\n    if(blackContains(board, curPos)) {\n      if(redContains(board, newPos) && !blackContains(board, jumpPos) && !redContains(board, jumpPos)) {\n        return [jumpPos];\n      }\n    }\n    if(redContains(board, curPos)) {\n      if(blackContains(board, newPos) && !blackContains(board, jumpPos) && !redContains(board, jumpPos)) {\n        return [jumpPos];\n      }\n    }\n  }\n  return [];\n}\n\nfunction removePiece(board, position, black) {\n  if(black === true) {\n    for(var i = 0; i < board.black.length; i++) {\n      if(board.black[i].row === position.row && board.black[i].column === position.column) {\n        board.black.splice(i, 1);\n      }\n    }\n  } else {\n    for(var i = 0; i < board.red.length; i++) {\n      if(board.red[i].row === position.row && board.red[i].column === position.column) {\n        board.red.splice(i, 1);\n      }\n    }\n  }\n  return board;\n}\n\nfunction addPiece(board, position, black) {\n  if(black === true) {\n    board.black.push(position);\n  } else {\n    board.red.push(position);\n  }\n  return board\n}\n\nfunction blackContains(board, position) {\n  for (var i = 0; i < board.black.length; i++) {\n    if (board.black[i].row === position.row && board.black[i].column === position.column) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction redContains(board, position) {\n  for (var i = 0; i < board.red.length; i++) {\n    if (board.red[i].row === position.row && board.red[i].column === position.column) {\n      return true;\n    }\n  }\n  return false;\n}\n"]},"metadata":{},"sourceType":"module"}